/* Sidebar */
:root {
  --sidebar-inline-space: max(calc(var(--inline-space) * 1.5), 1vw);
  --sidebar-tools-height: calc(var(--block-space) + var(--btn-size) + (var(--block-space) * 2));
}

.sidebar__container {
  block-size: 100dvh;
  max-block-size: 100dvh;
  padding-block-end: var(--sidebar-tools-height);
  display: flex;
  flex-direction: column;
}

.sidebar__tools {
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  inset: auto 0 0 0;
  padding-block: calc(var(--block-space) * 1.5);
  padding-inline: var(--sidebar-inline-space);
  position: fixed;
}

@media (min-width: 100ch) {
  .sidebar__tools {
    inline-size: calc(var(--sidebar-width));
    inset-inline-start: auto;
  }
}

.sidebar__toggle {
  inset-block-start: var(--block-space-half);
  inset-inline-start: calc((var(--btn-size) + max(var(--inline-space), 1vw)) * -1);
  position: absolute;
  transition: inset-inline-start 300ms ease;
  z-index: 5;
}

@media (min-width: 100ch) {
  .sidebar__toggle {
    display: none;
  }
}

.open .sidebar__toggle {
  inset-block-start: var(--block-space);
}

@media (max-width: 100ch) {
  .open .sidebar__toggle {
    inset-inline-start: var(--sidebar-inline-space);
  }
}

/* Direct messages */
.directs {
  --btn-border-color: var(--color-border-darker);
  --column-gap: calc(var(--inline-space) / 1.5);

  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  display: grid;
  grid-auto-columns: minmax(auto, max-content);
  grid-auto-flow: column;
  inset: 0 0 auto 0;
  justify-content: start;
  overscroll-behavior: auto;
  margin-block-end: var(--block-space-half);
  padding-block: var(--block-space) var(--block-space-half);
  padding-inline: var(--sidebar-inline-space) calc(var(--sidebar-inline-space) + var(--column-gap));
  position: sticky;
  z-index: 3;
  overflow-x: auto;
}

.direct {
  border-radius: 0.3em;
  box-shadow: none;
  color: var(--color-text);
  display: grid;
  justify-items: center;
  position: relative;
  text-decoration: none;
  padding: 0.5em;
}

.direct__author {
  --column-gap: 0.3ch;
  margin-block-start: 0.1em;
  font-size: 0.75rem;
  text-align: center;
}

.direct__new {
  margin-inline-end: var(--inline-space-half);
}

/* Rooms */
.rooms {
  --column-gap: 0.5em;
  --row-gap: 0.5em;

  padding-inline: var(--sidebar-inline-space);
  flex: 1;
  overflow-y: auto;
}

.rooms__new-btn {
  inset-block-end: calc((var(--sidebar-tools-height) * -1) + var(--block-space) * 1.5);
  position: sticky;
  z-index: 4;
}

.room {
  background-color: var(--color-text-reversed);
  color: var(--color-text);
  font-weight: normal;
  justify-content: start;
  margin-inline-end: auto;
  max-inline-size: 100%;
  display: block;
  text-decoration: none;
  padding: 0.5em 1em;
  margin-block-end: 0.5em;
  border-radius: 0.5em;
  border: 1px solid var(--color-border-darker);
  transition: all 150ms ease;
}

.room:hover {
  background-color: var(--color-border);
  border-color: var(--color-text);
}

.room.unread {
  --btn-border-color: var(--color-text);
  font-weight: 600;
  box-shadow: 0 0 0 1px var(--color-text);
}
