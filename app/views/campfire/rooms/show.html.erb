<% content_for :nav_content do %>
  <a href="<%= rooms_path %>" class="btn">
    <span class="for-screen-reader">All Talk</span>
    All Talk
  </a>
<% end %>

<div class="messages"
     id="messages"
     data-controller="messages"
     data-messages-formatted-class="message--formatted"
     data-messages-me-class="message--me"
     data-current-user-id="<%= current_campfire_user.id %>">
  <% if @room.messages.any? %>
    <%= render partial: "campfire/messages/message", collection: @room.messages.ordered.with_creator %>
  <% else %>
    <div class="message-area message-area--empty">
      <figure style="text-align: center; padding: 2em;">
        <div style="font-size: 3em; margin-bottom: 0.5em;">ðŸ’¬</div>
        <figcaption>
          <h2>Welcome to <%= @room.name || "this conversation" %></h2>
          <p style="color: var(--color-border-darker);">No messages yet. Start the conversation!</p>
        </figcaption>
      </figure>
    </div>
  <% end %>
</div>

<%= turbo_stream_from @room, :messages %>

<footer id="footer" class="composer">
  <%= render "campfire/messages/form", room: @room %>
</footer>
